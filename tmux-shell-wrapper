#!/bin/sh
set -euf

case "`uname`" in
    [dD]arwin)
        if [ -f /usr/local/bin/reattach-to-user-namespace ]; then
            exec /usr/local/bin/reattach-to-user-namespace -l "$SHELL"
        else
            # assuming brew is on the path, we can get the bin directory this way
            $HOMEBREW_BIN="`brew --prefix`"/bin
            if [ -f "$HOMEBREW_BIN"/reattach-to-user-namespace ]; then
                exec "$HOMEBREW_BIN"/reattach-to-user-namespace -l "$SHELL"
            else
                # so this is probably an error because there's no
                # reattach-to-user-namespace executable in the 
                # expected location or a custom location
                exec "$SHELL"
            fi
        fi
        ;;
    *)
        exec "$SHELL"
        ;;
esac
